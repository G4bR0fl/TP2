<!DOCTYPE html>
<!--[if IE 8]> <html lang="en" class="ie8"> <![endif]-->  
<!--[if IE 9]> <html lang="en" class="ie9"> <![endif]-->  
<!--[if !IE]><!--> <html lang="en"> <!--<![endif]-->  
<head>
    <title>Good Old Times</title>
    <!-- Meta -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="Thiago Veras & Giovanni Guidini">    
    <link rel="shortcut icon" href="assets/images/UnB-logo.png">  
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/css'>
    <!-- Global CSS -->
    <link rel="stylesheet" href="assets/plugins/bootstrap/css/bootstrap.min.css">   
    <!-- Plugins CSS -->    
    <link rel="stylesheet" href="assets/plugins/font-awesome/css/font-awesome.css">
    <link rel="stylesheet" href="assets/plugins/prism/prism.css">
    <link rel="stylesheet" href="assets/plugins/elegant_font/css/style.css">
    
    <!-- Theme CSS -->
    <link id="theme-style" rel="stylesheet" href="assets/css/styles.css">

    <!-- Syntax Prettyprint -->
    <link rel="stylesheet"  href="assets/syntax/tomorrow_night.css">
    <script src = "assets/syntax/prettify.js"></script>

    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <style>
        .img-responsive{
            width: 80%;
            display: block;
            margin-left: auto;
            margin-right: auto;
            margin-top: 5%;
        }
    </style>

</head> 

<body class="body-pink">
        <div class="page-wrapper">
            <!-- ******Header****** -->
            <header id="header" class="header">
                <div class="container">
                    <div class="branding">
                        <h1 class="logo">
                            <a href="index.html">
                                <span aria-hidden="true" class="icon_documents_alt icon"></span>
                                <span class="text-highlight">Técnicas de Programação 2</span>
                            </a>
                        </h1>
                    </div><!--//branding-->
                </div><!--//container-->
            </header><!--//header-->
            <div class="doc-wrapper">
                <div class="container">
                    <div id="doc-header" class="doc-header text-center">
                        <h1 class="doc-title">Good Old Times</h1>
                    </div><!--//doc-header-->
                    <div class="doc-body">
                        <div class="doc-content">
                            <div class="content-inner">
                                <section id="bg" class="doc-section">
                                    <h2 class="section-title">Background</h2>
                                    <div class="section-block" id="intro">
                                        <p>Este estilo de programação reflete aquela feita nos primeiros computadores, do início da década de 50. Ele vem
                                          diretamente do primerio modelo viável de computação, as máquinas de Turing.</p>

                                        <p>Uma máquina de Turing consiste em uma fita de memória modificável e uma máquina de estados que lê e modifica
                                          esses estados, assim, só existe a memória. As máquinas de Turing influenciou os modelos de Von Neumman. Essas
                                          máquinas e modelos levaram aos primeiros computadores e, consequentemente, às primerias linguagens de
                                          programação.</p>
                                          
                                        <p>Antigamente, os computadores possuiam uma memória RAM muito mais limitada do que temos hoje em dia.
                                          Atualmente, as linguagens de programação tentam cuidar cada vez mais a gestão da memória, visto que os
                                          programas atuais conseguem movimentar uma massa de dados muito maior que os programas antigos. Com isso, é mais fácil
                                          perder o controle em relação aos acessos à memória, o que afeta complexidade do algoritmo,
                                          deixando o mesmo mais lento.
                                        </p>

                                        <p>Nos dias atuais, grande parte das aplicações vêm trazendo complexidades em lidar com pequenas frações de memória. 
                                          Apesar da memória ter crescido muito em tamanho, ela ainda não consegue acompanhar o fluxo de dados. Como os dados não cabem
                                          na memória todos de uma vez, os programadores usam de artifícios que jogam para a memória apenas dados necessários num determinado
                                          instante de tempo.
                                        </p>

                                        <p>
                                          Outro avanço significativo, foi a leitura do código ficar cada vez mais fácil para o programador. Assim dependendo cada vez menos
                                          de documentações externas. Dando cada vez menos espaço para falhas dentro dos códigos, ja que os mesmos possuiam uma manutenbilidade boa.
                                        </p>
                                    </div>
                                </section><!--//doc-section-->

                                <section id="restrictions" class="doc-section"> 
                                    <h2 class="section-title">Restrições</h2>
                                    <ul>
                                      <li>Quantidade muito pequena de memória primária. Geralmente menor do que o tamanho dos dados a serem
                                        processados/gerados</li>
                                      <li>Não existem identificadores - variáveis, posições anotadas da memória - apenas posições da memória que
                                        podem ser referenciadas por números.</li>
                                    </ul>
                                </section><!--//doc-section-->
                                <section id="example" class="doc-section">
                                    <h2 class="section-title">Exemplo</h2>
                                    <h3>Hello World</h3>
                                    <pre class="prettyprint linenums:1 lang-ruby">
"""
Hello World program, Good Old Times style.
"""
# Small memory, with 1024 positions.
data = [0] * 1024

# Add words to memory
data[0:5] = 'Hello '
data[6:11] = 'World!'

# Print message
data[12] = 0 # index
while(data[12] < 11):
    print(data[data[12]], end="")   # print char
    data[12] += 1 # index++
print() # print \n
                                    </pre>
                                    <h3>Exemplo do Livro</h3>
                                    <pre class="prettyprint linenums:1 lang-py">
import sys, os, string

# Utility for handling the intermediate 'secondary memory'
def touchopen(filename, *args, **kwargs):
    try:
        os.remove(filename)
    except OSError:
        pass
    open(filename, "a").close() # "touch" file
    return open(filename, *args, **kwargs)

# The constrained memory should have no more than 1024 cells
data = []
# We're lucky:
# The stop words are only 556 characters and the lines are all 
# less than 80 characters, so we can use that knowledge to 
# simplify the problem: we can have the stop words loaded in 
# memory while processing one line of the input at a time.
# If these two assumptions didn't hold, the algorithm would 
# need to be changed considerably.

# Overall strategy: (PART 1) read the input file, count the 
# words, increment/store counts in secondary memory (a file) 
# (PART 2) find the 25 most frequent words in secondary memory

# PART 1: 
# - read the input file one line at a time
# - filter the characters, normalize to lower case
# - identify words, increment corresponding counts in file

# Load the list of stop words
f = open('../stop_words.txt')
data = [f.read(1024).split(',')] # data[0] holds the stop words
f.close()

data.append([])    # data[1] is line (max 80 characters)
data.append(None)  # data[2] is index of the start_char of word
data.append(0)     # data[3] is index on characters, i = 0
data.append(False) # data[4] is flag indicating if word was found
data.append('')    # data[5] is the word
data.append('')    # data[6] is word,NNNN
data.append(0)     # data[7] is frequency

# Open the secondary memory
word_freqs = touchopen('word_freqs', 'rb+')
# Open the input file
f = open(sys.argv[1])
# Loop over input file's lines
while True:
    data[1] = [f.readline()] 
    if data[1] == ['']: # end of input file
        break
    if data[1][0][len(data[1][0])-1] != '\n': # If it does not end with \n
        data[1][0] = data[1][0] + '\n' # Add \n
    data[2] = None
    data[3] = 0 
    # Loop over characters in the line
    for c in data[1][0]: # elimination of symbol c is exercise
        if data[2] == None:
            if c.isalnum():
                # We found the start of a word
                data[2] = data[3]
        else:
            if not c.isalnum():
                # We found the end of a word. Process it
                data[4] = False 
                data[5] = data[1][0][data[2]:data[3]].lower()
                # Ignore words with len < 2, and stop words
                if len(data[5]) >= 2 and data[5] not in data[0]:
                    # Let's see if it already exists
                    while True:
                        data[6] = word_freqs.readline().strip()
                        if data[6] == '':
                            break;
                        data[7] = int(data[6].split(',')[1])
                        # word, no white space
                        data[6] = data[6].split(',')[0].strip() 
                        if data[5] == data[6]:
                            data[7] += 1
                            data[4] = True
                            break
                    if not data[4]:
                        word_freqs.seek(0, 1) # Needed in Windows
                        word_freqs.writelines("%20s,%04d\n" % (data[5], 1))
                    else:
                        word_freqs.seek(-26, 1)
                        word_freqs.writelines("%20s,%04d\n" % (data[5], data[7]))
                    word_freqs.seek(0,0)
                # Let's reset
                data[2] = None
        data[3] += 1
# We're done with the input file
f.close()
word_freqs.flush()

# PART 2
# Now we need to find the 25 most frequently occuring words.
# We don't need anything from the previous values in memory
del data[:]

# Let's use the first 25 entries for the top 25 words
data = data + [[]]*(25 - len(data))
data.append('') # data[25] is word,freq from file
data.append(0)  # data[26] is freq

# Loop over secondary memory file
while True:
    data[25] = word_freqs.readline().strip()
    if data[25] == '': # EOF
        break
    data[26] = int(data[25].split(',')[1]) # Read it as integer
    data[25] = data[25].split(',')[0].strip() # word
    # Check if this word has more counts than the ones in memory
    for i in range(25): # elimination of symbol i is exercise
        if data[i] == [] or data[i][1] < data[26]:
            data.insert(i, [data[25], data[26]]) 
            del data[26] #  delete the last element
            break
            
for tf in data[0:25]: # elimination of symbol tf is exercise
    if len(tf) == 2:
        print tf[0], ' - ', tf[1]
# We're done
word_freqs.close()
                            </section><!--//doc-section-->
                                   
                                   
                            </div><!--//content-inner-->
                        </div><!--//doc-content-->

                    <div class="doc-sidebar hidden-xs">
                        <nav id="doc-nav">
                            <ul id="doc-menu" class="nav doc-menu" data-spy="affix">
                                <li><a class="scrollto" href="#bg">Background</a></li>
                                <li><a class="scrollto" href="#restrictions">Restrições</a></li>
                                <li><a class="scrollto" href="#example">Exemplo</a></li>
                            </ul><!--//doc-menu-->
                        </nav>
                    </div><!--//doc-sidebar-->
                </div><!--//doc-body-->              
            </div><!--//container-->
        </div><!--//doc-wrapper-->        
    </div><!--//page-wrapper-->
    
    <footer id="footer" class="footer text-center">
        <div class="container">
            <!--/* This template is released under the Creative Commons Attribution 3.0 License. Please keep the attribution link below when using for your own project. Thank you for your support. :) If you'd like to use the template without the attribution, you can check out other license options via our website: themes.3rdwavemedia.com */-->
            <small class="copyright">Created by:<a class="link" href="https://github.com/VerasThiago" target="_blank"><span> Thiago Veras</span></a> &amp; <a class="link" href="https://github.com/Gguidini" target="_blank"><span> Giovanni M Guidini</span></a></small>
             <br> <!-- break line-->
             <small class="copyright">Theme PRETTYDOCS by <a href="http://themes.3rdwavemedia.com/" targe="_blank">Xiaoying Riley</a></small>
 
        </div><!--//container-->
    </footer><!--//footer-->
    
     
    <!-- Main Javascript -->          
    <script type="text/javascript" src="assets/plugins/jquery-1.12.3.min.js"></script>
    <script type="text/javascript" src="assets/plugins/bootstrap/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="assets/plugins/prism/prism.js"></script>    
    <script type="text/javascript" src="assets/plugins/jquery-scrollTo/jquery.scrollTo.min.js"></script>                                                                
    <script type="text/javascript" src="assets/plugins/jquery-match-height/jquery.matchHeight-min.js"></script>
    <script type="text/javascript" src="assets/js/main.js"></script>
    <script type="text/javascript" src="assets/js/animation.js"></script>
    
    <script>
      prettyPrint();
    </script>
    
</body>
</html> 